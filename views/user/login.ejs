<!DOCTYPE html>
<html lang="en">
<%- include('partials/head') %> 
<body class="auth-body">
    <div class="auth-container">
        <h2 class="m-0"><a class="login-logo" href="/home">Glowly</a></h2>
        <h3 class="m-0">Log in to Exclusive</h3>
        <p>Enter your details below</p>
        
        <% if (msg) { %>
            <div class="alert <%= msg.type === 'error' ? 'alert-error' : 'alert-success' %>">
                <%= msg.msg %>
            </div>
        <% } %>
        
        <form id="loginForm" action="/login" method="POST" onsubmit="return validateEmptyFields();">
            <!-- email -->
            <div class="wave-group">
                <input type="email" id="email" class="input" name="email" placeholder=""/>
                <span class="bar"></span>
                <label class="label">
                    <span class="label-char" style="--index: 0">E</span>
                    <span class="label-char" style="--index: 1">m</span>
                    <span class="label-char" style="--index: 2">a</span>
                    <span class="label-char" style="--index: 3">i</span>
                    <span class="label-char" style="--index: 4">l</span>
                </label>
            </div>
            <div id="error1" class="error-message" style="color: red; display: none;"></div>
            
            <!-- password -->
            <div class="wave-group">
                <input type="password" id="password" class="input password" name="password" placeholder="" />
                <span class="bar"></span>
                <label class="label">
                    <span class="label-char" style="--index: 0">P</span>
                    <span class="label-char" style="--index: 1">a</span>
                    <span class="label-char" style="--index: 2">s</span>
                    <span class="label-char" style="--index: 3">s</span>
                    <span class="label-char" style="--index: 4">w</span>
                    <span class="label-char" style="--index: 5">o</span>
                    <span class="label-char" style="--index: 6">r</span>
                    <span class="label-char" style="--index: 7">d</span>
                </label>
                <button type="button" class="togglePassword" aria-label="Show password"><i class="fa-solid fa-eye"></i></button>
            </div>
            <div id="error2" class="error-message" style="color: red; display: none;"></div>
            
            <a href="/forgot-password" id="forgot-password">Forgot Password ?</a>
            <button type="submit" class="btn auth-btn">Login</button>
        </form>
        <div class="social-auth-btn-container m-2">
            <a href="/auth/google">
                <button class="btn social-google social-auth-btn">
                    <i class="fa-brands fa-google"></i>
                    Log in with Google
                </button>
            </a>
        </div>
        <p>Donâ€™t have an account? <a href="/signup">Signup</a></p>
    </div>


</body>
<script src="/js/script.js"></script>
<%- include('partials/footer') %> 

<script>
    function validateEmptyFields() {
        const emailError = document.getElementById('error1');
        const passwordError = document.getElementById('error2');
        const emailInput = document.getElementById('email');
        const passwordInput = document.getElementById('password');

        const emailValue = emailInput.value.trim();
        const passwordValue = passwordInput.value.trim();

        // Reset previous errors
        emailError.style.display = "none"; 
        emailError.textContent = "";
        passwordError.style.display = "none";
        passwordError.textContent = "";

        let isValid = true;

        if (emailValue === "") {
            emailError.style.display = "block"; 
            emailError.textContent = "Email field cannot be empty.";
            isValid = false;
        }

        if (passwordValue === "") {
            passwordError.style.display = "block"; 
            passwordError.textContent = "Password field cannot be empty.";
            isValid = false;
        }

        return isValid;  
    }
</script>

</html>
