<!DOCTYPE html>
<html lang="en">
<%- include('partials/head') %> 
<body class="auth-body">
    <div class="auth-container">
        <h3 class="m-2">Forgot Password &nbsp;&nbsp; <i class="fa-solid fa-lock"></i></h3>
        <p class="m-2">Enter Your Email And We Will Send You Instructions To Reset Your Password </p>
        <% if (msg) { %>
            <div class="alert <%= msg.type === 'error' ? 'alert-error' : 'alert-success' %>">
              <%= msg.msg %>
            </div>
        <% } %>
        
        <!-- Forgot Password Form with onsubmit validation -->
        <form id="forgotPasswordForm" action="/forgot-password" method="POST" onsubmit="return validateEmptyField();">
            <div class="wave-group">
                <input type="email" id="email" class="input email" name="email" placeholder="" />
                <span class="bar"></span>
                <label class="label">
                    <span class="label-char" style="--index: 0">E</span>
                    <span class="label-char" style="--index: 1">m</span>
                    <span class="label-char" style="--index: 2">a</span>
                    <span class="label-char" style="--index: 3">i</span>
                    <span class="label-char" style="--index: 4">l</span>
                </label>
            </div>
            <div id="error1" class="error-message" style="color: red; display: none;"></div>
            <button type="submit" class="btn m-2 action-btn">Send Link</button>
        </form>
        
        <p>Back to <a href="/login">Login ?</a></p>
    </div>

</body>
<%- include('partials/footer') %> 

<script>
    function validateEmptyField() {
        const emailError = document.getElementById('error1');
        const emailInput = document.getElementById('email');
        const emailValue = emailInput.value.trim();

        // Reset previous errors
        emailError.style.display = "none"; 
        emailError.textContent = "";

        let isValid = true;

        if (emailValue === "") {
            emailError.style.display = "block"; 
            emailError.textContent = "Email field cannot be empty.";
            isValid = false;
        }

        return isValid;  
    }
</script>
</html>
