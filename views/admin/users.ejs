<!DOCTYPE html>
<html lang="en">
<%- include('partials/head') %> 

        <div class="filter-container">
            <div class="filter-div1">
                <div class="filter-box">
                    <i class="fa-solid fa-filter"></i>
                   </div>
                <div class="filter-box">
                    <label for="filter">Filter By

                        <select name="filter" id="filter">
                            <option value="date">14 feb 2014</option>
                        </select>
                    </label>
                    
                   </div>
                   <div class="filter-box">
                    <label for="category">Category
                        <select name="category" id="category">
                            <option value="category1">Category1</option>
                            <option value="category2">Category2</option>
                        </select>

                    </label>
                    
                   </div>
            </div>
        </div>
        <table class="all-table">
            <thead>
                <tr>
                    <th>S.No</th>
                    <th>Name</th>
                    <th>Email</th>
                    <th>Phone No</th>
                    <th>Created At</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                <% users.forEach((user, index) => { %>
                   <tr>
                    <td><%= (currentPage - 1) * perPage + index + 1 %></td>
                     <td><%= user.name %></td>
                     <td><%= user.email %></td>
                     <td><%= user.phone_no %></td>
                     <td><%= user.created_at %></td> 
                     <td>
                        <!-- Form for blocking user (update) -->
                        <form action="/update" method="POST">
                            <input type="hidden" name="userId" value="<%= user._id %>"> <!-- User ID for identification -->
                            <button type="submit">Block</button>
                        </form>
                     </td>
                   </tr>
                <% }); %>
            </tbody>
        </table>
        <div class="pagination">
            <% if (currentPage > 1) { %> 
                <a href="/users?page=<%= currentPage - 1 %>">Previous</a>
            <% } %>
        
            <% for (let i = 1; i <= totalPages; i++) { %>
                <!-- Make each page number clickable -->
                <a href="/users?page=<%= i %>" class="<%= currentPage === i ? 'active' : '' %>">
                    <%= i %> <!-- Display the page number here -->
                </a>    
            <% } %>
        
            <% if (currentPage < totalPages) { %>
                <a href="/users?page=<%= currentPage + 1 %>">Next</a>
            <% } %>
        </div>
        
    </div>  <!-- <div class="main-content"></div> -->
</body>
<%- include('partials/footer') %> 
</html>
